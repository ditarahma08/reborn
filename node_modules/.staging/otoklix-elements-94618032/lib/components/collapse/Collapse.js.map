{"version":3,"sources":["../../../src/components/collapse/Collapse.js"],"names":["propTypes","Transition","isOpen","PropTypes","bool","children","oneOfType","arrayOf","node","tag","tagPropType","className","navbar","cssModule","object","innerRef","func","string","defaultProps","appear","enter","exit","timeout","TransitionTimeouts","Collapse","transitionStatusToClassHash","TransitionStatuses","ENTERING","ENTERED","EXITING","EXITED","getTransitionClass","status","getHeight","scrollHeight","props","state","height","forEach","name","bind","isAppearing","setState","onEntering","onEntered","onExit","_unused","offsetHeight","onExiting","onExited","Tag","otherProps","transitionProps","TransitionPropTypeKeys","childProps","collapseClass","classes","style","Component"],"mappings":";;;;;;;;;AAAA;;AACA;;AACA;;AACA;;AACA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAUA,IAAMA,SAAS,mCACVC,iCAAWD,SADD;AAEbE,EAAAA,MAAM,EAAEC,sBAAUC,IAFL;AAGbC,EAAAA,QAAQ,EAAEF,sBAAUG,SAAV,CAAoB,CAC5BH,sBAAUI,OAAV,CAAkBJ,sBAAUK,IAA5B,CAD4B,EAE5BL,sBAAUK,IAFkB,CAApB,CAHG;AAObC,EAAAA,GAAG,EAAEC,kBAPQ;AAQbC,EAAAA,SAAS,EAAER,sBAAUK,IARR;AASbI,EAAAA,MAAM,EAAET,sBAAUC,IATL;AAUbS,EAAAA,SAAS,EAAEV,sBAAUW,MAVR;AAWbC,EAAAA,QAAQ,EAAEZ,sBAAUG,SAAV,CAAoB,CAC5BH,sBAAUa,IADkB,EAE5Bb,sBAAUc,MAFkB,EAG5Bd,sBAAUW,MAHkB,CAApB;AAXG,EAAf;;AAkBA,IAAMI,YAAY,mCACbjB,iCAAWiB,YADE;AAEhBhB,EAAAA,MAAM,EAAE,KAFQ;AAGhBiB,EAAAA,MAAM,EAAE,KAHQ;AAIhBC,EAAAA,KAAK,EAAE,IAJS;AAKhBC,EAAAA,IAAI,EAAE,IALU;AAMhBZ,EAAAA,GAAG,EAAE,KANW;AAOhBa,EAAAA,OAAO,EAAEC,0BAAmBC;AAPZ,EAAlB;;AAUA,IAAMC,2BAA2B,uEAC9BC,0BAAmBC,QADW,EACA,YADA,0CAE9BD,0BAAmBE,OAFW,EAED,eAFC,0CAG9BF,0BAAmBG,OAHW,EAGD,YAHC,0CAI9BH,0BAAmBI,MAJW,EAIF,UAJE,yBAAjC;;AAOA,SAASC,kBAAT,CAA4BC,MAA5B,EAAoC;AAClC,SAAOP,2BAA2B,CAACO,MAAD,CAA3B,IAAuC,UAA9C;AACD;;AAED,SAASC,SAAT,CAAmBzB,IAAnB,EAAyB;AACvB,SAAOA,IAAI,CAAC0B,YAAZ;AACD;;IAEKV,Q;;;;;AACJ,oBAAYW,KAAZ,EAAmB;AAAA;;AAAA;;AACjB,8BAAMA,KAAN;AAEA,UAAKC,KAAL,GAAa;AACXC,MAAAA,MAAM,EAAE;AADG,KAAb;AAIA,KAAC,YAAD,EAAe,WAAf,EAA4B,QAA5B,EAAsC,WAAtC,EAAmD,UAAnD,EAA+DC,OAA/D,CACE,UAACC,IAAD,EAAU;AACR,YAAKA,IAAL,IAAa,MAAKA,IAAL,EAAWC,IAAX,+BAAb;AACD,KAHH;AAPiB;AAYlB;;;;WAED,oBAAWhC,IAAX,EAAiBiC,WAAjB,EAA8B;AAC5B,WAAKC,QAAL,CAAc;AAAEL,QAAAA,MAAM,EAAEJ,SAAS,CAACzB,IAAD;AAAnB,OAAd;AACA,WAAK2B,KAAL,CAAWQ,UAAX,CAAsBnC,IAAtB,EAA4BiC,WAA5B;AACD;;;WAED,mBAAUjC,IAAV,EAAgBiC,WAAhB,EAA6B;AAC3B,WAAKC,QAAL,CAAc;AAAEL,QAAAA,MAAM,EAAE;AAAV,OAAd;AACA,WAAKF,KAAL,CAAWS,SAAX,CAAqBpC,IAArB,EAA2BiC,WAA3B;AACD;;;WAED,gBAAOjC,IAAP,EAAa;AACX,WAAKkC,QAAL,CAAc;AAAEL,QAAAA,MAAM,EAAEJ,SAAS,CAACzB,IAAD;AAAnB,OAAd;AACA,WAAK2B,KAAL,CAAWU,MAAX,CAAkBrC,IAAlB;AACD;;;WAED,mBAAUA,IAAV,EAAgB;AACd;AACA,UAAMsC,OAAO,GAAGtC,IAAI,CAACuC,YAArB,CAFc,CAEqB;;AACnC,WAAKL,QAAL,CAAc;AAAEL,QAAAA,MAAM,EAAE;AAAV,OAAd;AACA,WAAKF,KAAL,CAAWa,SAAX,CAAqBxC,IAArB;AACD;;;WAED,kBAASA,IAAT,EAAe;AACb,WAAKkC,QAAL,CAAc;AAAEL,QAAAA,MAAM,EAAE;AAAV,OAAd;AACA,WAAKF,KAAL,CAAWc,QAAX,CAAoBzC,IAApB;AACD;;;WAED,kBAAS;AAAA;;AACP,wBASI,KAAK2B,KATT;AAAA,UACOe,GADP,eACEzC,GADF;AAAA,UAEEP,MAFF,eAEEA,MAFF;AAAA,UAGES,SAHF,eAGEA,SAHF;AAAA,UAIEC,MAJF,eAIEA,MAJF;AAAA,UAKEC,SALF,eAKEA,SALF;AAAA,UAMER,QANF,eAMEA,QANF;AAAA,UAOEU,QAPF,eAOEA,QAPF;AAAA,UAQKoC,UARL;;AAWA,UAAQd,MAAR,GAAmB,KAAKD,KAAxB,CAAQC,MAAR;AAEA,UAAMe,eAAe,GAAG,iBAAKD,UAAL,EAAiBE,6BAAjB,CAAxB;AACA,UAAMC,UAAU,GAAG,iBAAKH,UAAL,EAAiBE,6BAAjB,CAAnB;AACA,0BACE,gCAAC,gCAAD,eACMD,eADN;AAEE,cAAIlD,MAFN;AAGE,QAAA,UAAU,EAAE,KAAKyC,UAHnB;AAIE,QAAA,SAAS,EAAE,KAAKC,SAJlB;AAKE,QAAA,MAAM,EAAE,KAAKC,MALf;AAME,QAAA,SAAS,EAAE,KAAKG,SANlB;AAOE,QAAA,QAAQ,EAAE,KAAKC;AAPjB,UASG,UAACjB,MAAD,EAAY;AACX,YAAIuB,aAAa,GAAGxB,kBAAkB,CAACC,MAAD,CAAtC;AACA,YAAMwB,OAAO,GAAG,4BACd,4BAAW7C,SAAX,EAAsB4C,aAAtB,EAAqC3C,MAAM,IAAI,iBAA/C,CADc,EAEdC,SAFc,CAAhB;AAIA,YAAM4C,KAAK,GAAGpB,MAAM,KAAK,IAAX,GAAkB,IAAlB,GAAyB;AAAEA,UAAAA,MAAM,EAANA;AAAF,SAAvC;AACA,4BACE,gCAAC,GAAD,eACMiB,UADN;AAEE,UAAA,KAAK,kCAAOA,UAAU,CAACG,KAAlB,GAA4BA,KAA5B,CAFP;AAGE,UAAA,SAAS,EAAED,OAHb;AAIE,UAAA,GAAG,EAAE,MAAI,CAACrB,KAAL,CAAWpB;AAJlB,YAMGV,QANH,CADF;AAUD,OA1BH,CADF;AA8BD;;;;EAxFoBqD,gB;;AA2FvBlC,QAAQ,CAACxB,SAAT,GAAqBA,SAArB;AACAwB,QAAQ,CAACN,YAAT,GAAwBA,YAAxB;eACeM,Q","sourcesContent":["import React, { Component } from 'react';\nimport PropTypes from 'prop-types';\nimport classNames from 'classnames';\nimport { Transition } from 'react-transition-group';\nimport {\n  mapToCssModules,\n  omit,\n  pick,\n  TransitionTimeouts,\n  TransitionPropTypeKeys,\n  TransitionStatuses,\n  tagPropType,\n} from '../utils';\n\nconst propTypes = {\n  ...Transition.propTypes,\n  isOpen: PropTypes.bool,\n  children: PropTypes.oneOfType([\n    PropTypes.arrayOf(PropTypes.node),\n    PropTypes.node,\n  ]),\n  tag: tagPropType,\n  className: PropTypes.node,\n  navbar: PropTypes.bool,\n  cssModule: PropTypes.object,\n  innerRef: PropTypes.oneOfType([\n    PropTypes.func,\n    PropTypes.string,\n    PropTypes.object,\n  ]),\n};\n\nconst defaultProps = {\n  ...Transition.defaultProps,\n  isOpen: false,\n  appear: false,\n  enter: true,\n  exit: true,\n  tag: 'div',\n  timeout: TransitionTimeouts.Collapse,\n};\n\nconst transitionStatusToClassHash = {\n  [TransitionStatuses.ENTERING]: 'collapsing',\n  [TransitionStatuses.ENTERED]: 'collapse show',\n  [TransitionStatuses.EXITING]: 'collapsing',\n  [TransitionStatuses.EXITED]: 'collapse',\n};\n\nfunction getTransitionClass(status) {\n  return transitionStatusToClassHash[status] || 'collapse';\n}\n\nfunction getHeight(node) {\n  return node.scrollHeight;\n}\n\nclass Collapse extends Component {\n  constructor(props) {\n    super(props);\n\n    this.state = {\n      height: null,\n    };\n\n    ['onEntering', 'onEntered', 'onExit', 'onExiting', 'onExited'].forEach(\n      (name) => {\n        this[name] = this[name].bind(this);\n      },\n    );\n  }\n\n  onEntering(node, isAppearing) {\n    this.setState({ height: getHeight(node) });\n    this.props.onEntering(node, isAppearing);\n  }\n\n  onEntered(node, isAppearing) {\n    this.setState({ height: null });\n    this.props.onEntered(node, isAppearing);\n  }\n\n  onExit(node) {\n    this.setState({ height: getHeight(node) });\n    this.props.onExit(node);\n  }\n\n  onExiting(node) {\n    // getting this variable triggers a reflow\n    const _unused = node.offsetHeight; // eslint-disable-line no-unused-vars\n    this.setState({ height: 0 });\n    this.props.onExiting(node);\n  }\n\n  onExited(node) {\n    this.setState({ height: null });\n    this.props.onExited(node);\n  }\n\n  render() {\n    const {\n      tag: Tag,\n      isOpen,\n      className,\n      navbar,\n      cssModule,\n      children,\n      innerRef,\n      ...otherProps\n    } = this.props;\n\n    const { height } = this.state;\n\n    const transitionProps = pick(otherProps, TransitionPropTypeKeys);\n    const childProps = omit(otherProps, TransitionPropTypeKeys);\n    return (\n      <Transition\n        {...transitionProps}\n        in={isOpen}\n        onEntering={this.onEntering}\n        onEntered={this.onEntered}\n        onExit={this.onExit}\n        onExiting={this.onExiting}\n        onExited={this.onExited}\n      >\n        {(status) => {\n          let collapseClass = getTransitionClass(status);\n          const classes = mapToCssModules(\n            classNames(className, collapseClass, navbar && 'navbar-collapse'),\n            cssModule,\n          );\n          const style = height === null ? null : { height };\n          return (\n            <Tag\n              {...childProps}\n              style={{ ...childProps.style, ...style }}\n              className={classes}\n              ref={this.props.innerRef}\n            >\n              {children}\n            </Tag>\n          );\n        }}\n      </Transition>\n    );\n  }\n}\n\nCollapse.propTypes = propTypes;\nCollapse.defaultProps = defaultProps;\nexport default Collapse;\n"],"file":"Collapse.js"}