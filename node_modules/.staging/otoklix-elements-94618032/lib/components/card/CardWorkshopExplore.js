"use strict";

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports["default"] = void 0;

var _react = _interopRequireDefault(require("react"));

var _propTypes = _interopRequireDefault(require("prop-types"));

var _classnames = _interopRequireDefault(require("classnames"));

var _Badge = _interopRequireDefault(require("../badge/Badge"));

var _Card = _interopRequireDefault(require("./Card"));

var _CardBody = _interopRequireDefault(require("./CardBody"));

var _Button = _interopRequireDefault(require("../button/Button"));

var _Text = _interopRequireDefault(require("../text/Text"));

var _utils = require("../utils");

var _excluded = ["title", "tags", "time", "timeIcon", "region", "distance", "rating", "image", "ratingImage", "tierImage", "onClick", "className", "imageClassName", "totalReview", "price", "point", "pointIcon", "ratingIcon", "isShowOtopoints", "isShowDistance", "isShowTime", "imgAlt", "imgLazyLoad", "detailButtonTarget", "openingTime", "openingTimeIcon", "originalPrice", "volumePrice", "isHaveDetailPrice", "isHavePrimaryPrice", "estimate", "onCardClick", "discountLabel", "showFlagship", "flagshipIcon", "flagshipDetailTarget", "isFlagshipPlus", "dataAutomationTitle", "dataAutomationTags", "dataAutomationAddress"];

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { "default": obj }; }

function _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }

function _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }

function _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }

var propTypes = {
  title: _propTypes["default"].string,
  tags: _propTypes["default"].array,
  time: _propTypes["default"].string,
  timeIcon: _propTypes["default"].string,
  region: _propTypes["default"].string,
  distance: _propTypes["default"].string,
  rating: _propTypes["default"].number,
  image: _propTypes["default"].string,
  ratingImage: _propTypes["default"].string,
  tierImage: _propTypes["default"].string,
  onClick: _propTypes["default"].func,
  className: _propTypes["default"].string,
  totalReview: _propTypes["default"].oneOfType([_propTypes["default"].string, _propTypes["default"].number]),
  price: _propTypes["default"].oneOfType([_propTypes["default"].string, _propTypes["default"].number]),
  point: _propTypes["default"].oneOfType([_propTypes["default"].string, _propTypes["default"].number]),
  imageClassName: _propTypes["default"].string,
  pointIcon: _propTypes["default"].string,
  ratingIcon: _propTypes["default"].string,
  isShowOtopoints: _propTypes["default"].bool,
  isShowDistance: _propTypes["default"].bool,
  isShowTime: _propTypes["default"].object,
  imgAlt: _propTypes["default"].string,
  imgLazyLoad: _propTypes["default"].bool,
  detailButtonTarget: _propTypes["default"].func,
  openingTime: _propTypes["default"].string,
  openingTimeIcon: _propTypes["default"].string,
  originalPrice: _propTypes["default"].oneOfType([_propTypes["default"].string, _propTypes["default"].number]),
  volumePrice: _propTypes["default"].oneOfType([_propTypes["default"].string, _propTypes["default"].number]),
  isHaveDetailPrice: _propTypes["default"].bool,
  isHavePrimaryPrice: _propTypes["default"].bool,
  estimate: _propTypes["default"].string,
  onCardClick: _propTypes["default"].func,
  discountLabel: _propTypes["default"].string,
  showFlagship: _propTypes["default"].bool,
  flagshipIcon: _propTypes["default"].string,
  flagshipDetailTarget: _propTypes["default"].func,
  isFlagshipPlus: _propTypes["default"].bool,
  dataAutomationTitle: _propTypes["default"].string,
  dataAutomationTags: _propTypes["default"].string,
  dataAutomationAddress: _propTypes["default"].string
};
var defaultProps = {
  distance: '0',
  region: '',
  tags: [],
  time: '',
  timeIcon: '',
  totalReview: '0',
  price: '0',
  point: '0',
  isShowOtopoints: true,
  isShowDistance: true,
  isShowTime: false,
  imgLazyLoad: true,
  originalPrice: '0',
  volumePrice: '0',
  isHaveDetailPrice: false,
  isHavePrimaryPrice: true,
  estimate: ''
};

var CardWorkshopExplore = function CardWorkshopExplore(props) {
  var title = props.title,
      tags = props.tags,
      time = props.time,
      timeIcon = props.timeIcon,
      region = props.region,
      distance = props.distance,
      rating = props.rating,
      image = props.image,
      ratingImage = props.ratingImage,
      tierImage = props.tierImage,
      onClick = props.onClick,
      className = props.className,
      imageClassName = props.imageClassName,
      totalReview = props.totalReview,
      price = props.price,
      point = props.point,
      pointIcon = props.pointIcon,
      ratingIcon = props.ratingIcon,
      isShowOtopoints = props.isShowOtopoints,
      isShowDistance = props.isShowDistance,
      isShowTime = props.isShowTime,
      imgAlt = props.imgAlt,
      imgLazyLoad = props.imgLazyLoad,
      detailButtonTarget = props.detailButtonTarget,
      openingTime = props.openingTime,
      openingTimeIcon = props.openingTimeIcon,
      originalPrice = props.originalPrice,
      volumePrice = props.volumePrice,
      isHaveDetailPrice = props.isHaveDetailPrice,
      isHavePrimaryPrice = props.isHavePrimaryPrice,
      estimate = props.estimate,
      onCardClick = props.onCardClick,
      discountLabel = props.discountLabel,
      showFlagship = props.showFlagship,
      flagshipIcon = props.flagshipIcon,
      flagshipDetailTarget = props.flagshipDetailTarget,
      isFlagshipPlus = props.isFlagshipPlus,
      dataAutomationTitle = props.dataAutomationTitle,
      dataAutomationTags = props.dataAutomationTags,
      dataAutomationAddress = props.dataAutomationAddress,
      attributes = _objectWithoutProperties(props, _excluded);

  var classes = (0, _utils.mapToCssModules)((0, _classnames["default"])(className, 'card-workshops-explore'));

  var getPriority = function getPriority(tier, linkTarget, type) {
    if (tier && linkTarget) {
      if (type === tier) {
        return '';
      }

      return linkTarget;
    }

    if (type === tier) {
      return tier;
    }

    return linkTarget;
  };

  var getPricePriority = function getPricePriority(primary, detail, type) {
    if (primary && detail || !primary && detail) {
      if (type === 'primary') {
        return false; // primaryPrice
      }

      return true; // detailPrice
    }

    if (primary && !detail) {
      if (type === 'primary') {
        return true; // primaryPrice
      }

      return false; // detailPrice
    }

    return false;
  };

  return /*#__PURE__*/_react["default"].createElement(_Card["default"], _extends({
    className: classes
  }, attributes), getPriority(tierImage, detailButtonTarget, detailButtonTarget) && /*#__PURE__*/_react["default"].createElement(_Button["default"], {
    className: "card-ws-explore-button rounded-pill floating-button",
    onClick: detailButtonTarget
  }, "Detail"), showFlagship &&
  /*#__PURE__*/
  // eslint-disable-next-line jsx-a11y/no-static-element-interactions
  _react["default"].createElement("div", {
    onClick: flagshipDetailTarget,
    className: "flagship-ribbon pointer ".concat(!isFlagshipPlus && '--plus')
  }, /*#__PURE__*/_react["default"].createElement("img", {
    src: flagshipIcon,
    alt: "falgship-icon"
  })), /*#__PURE__*/_react["default"].createElement(_CardBody["default"], {
    className: "p-3 pb-2",
    onClick: onCardClick
  }, /*#__PURE__*/_react["default"].createElement("div", {
    className: "d-flex"
  }, /*#__PURE__*/_react["default"].createElement("div", {
    className: "left-content"
  }, /*#__PURE__*/_react["default"].createElement("div", {
    className: "img-wrapper ws-explore"
  }, image && /*#__PURE__*/_react["default"].createElement("img", {
    className: "rounded-image",
    src: image,
    width: 80,
    height: 80,
    alt: imgAlt,
    loading: imgLazyLoad ? 'lazy' : 'eager'
  }), rating > 0 && /*#__PURE__*/_react["default"].createElement("div", {
    className: "rating-wrapper ws-explore"
  }, /*#__PURE__*/_react["default"].createElement("div", {
    className: "d-flex justify-content-center"
  }, /*#__PURE__*/_react["default"].createElement("img", {
    src: ratingIcon,
    width: 10,
    height: 10,
    alt: "icon-rating",
    loading: "lazy"
  }), /*#__PURE__*/_react["default"].createElement("span", {
    className: "rating mx-1"
  }, rating.toString()), /*#__PURE__*/_react["default"].createElement("span", {
    className: "total-review"
  }, "(", totalReview.toString(), ")"))))), /*#__PURE__*/_react["default"].createElement("div", {
    className: "w-100 right-content"
  }, /*#__PURE__*/_react["default"].createElement("div", {
    className: "d-flex align-items-start justify-content-between mb-1"
  }, /*#__PURE__*/_react["default"].createElement("h6", {
    color: "body",
    className: "title ".concat(tierImage || detailButtonTarget ? 'me-5' : 'me-1'),
    weight: "semi-bold",
    "data-automation": dataAutomationTitle
  }, title), getPriority(tierImage, detailButtonTarget, tierImage) && /*#__PURE__*/_react["default"].createElement("img", {
    className: "ms-1",
    src: tierImage,
    width: 16,
    height: 16,
    alt: "icon-tier",
    loading: "lazy"
  })), openingTime && /*#__PURE__*/_react["default"].createElement("p", {
    className: "time-ws-explore mb-1"
  }, /*#__PURE__*/_react["default"].createElement("span", {
    className: "me-1"
  }, openingTimeIcon ? /*#__PURE__*/_react["default"].createElement("img", {
    className: "",
    src: "".concat(openingTimeIcon),
    width: "12",
    height: "12",
    alt: "icon-time",
    loading: "lazy"
  }) : /*#__PURE__*/_react["default"].createElement("svg", {
    width: "10",
    height: "10",
    viewBox: "0 0 10 10",
    fill: "none",
    xmlns: "http://www.w3.org/2000/svg"
  }, /*#__PURE__*/_react["default"].createElement("path", {
    fillRule: "evenodd",
    clipRule: "evenodd",
    d: "M5.00016 0.833328C2.69898 0.833328 0.833496 2.69881 0.833496 5C0.833496 7.30118 2.69898 9.16666 5.00016 9.16666C7.30135 9.16666 9.16683 7.30118 9.16683 5C9.16683 2.69881 7.30135 0.833328 5.00016 0.833328ZM5.00016 2.49999C4.77004 2.49999 4.5835 2.68654 4.5835 2.91666V5C4.5835 5.10471 4.62212 5.20039 4.6859 5.27359L4.68523 5.27426L4.70125 5.29028L4.70988 5.29891L5.56082 6.14985C5.72354 6.31257 5.98737 6.31257 6.15009 6.14985C6.31281 5.98712 6.31281 5.7233 6.15009 5.56058L5.41683 4.82732V2.91666C5.41683 2.68654 5.23028 2.49999 5.00016 2.49999Z",
    fill: "#16A163"
  }))), openingTime), (region || isShowDistance) &&
  /*#__PURE__*/
  // <div className="d-flex align-items-center mb-1">
  _react["default"].createElement("div", {
    className: "info d-flex flex-wrap align-items-center mb-1",
    "data-automation": dataAutomationAddress
  }, /*#__PURE__*/_react["default"].createElement("p", {
    className: "address my-0"
  }, region), isShowDistance && /*#__PURE__*/_react["default"].createElement(_react["default"].Fragment, null, /*#__PURE__*/_react["default"].createElement("span", {
    className: "mx-1"
  }, "|"), /*#__PURE__*/_react["default"].createElement("p", {
    className: "distance"
  }, distance, /*#__PURE__*/_react["default"].createElement("span", {
    className: "estimate ".concat(!estimate && 'd-none')
  }, "(", estimate, ")"))), isShowTime && /*#__PURE__*/_react["default"].createElement(_react["default"].Fragment, null, /*#__PURE__*/_react["default"].createElement("span", {
    className: "mx-1"
  }, "|"), /*#__PURE__*/_react["default"].createElement("p", {
    className: "time"
  }, /*#__PURE__*/_react["default"].createElement("span", null, timeIcon !== '' ? /*#__PURE__*/_react["default"].createElement("img", {
    className: "",
    src: "".concat(timeIcon),
    width: "12",
    height: "12",
    alt: "icon-time",
    loading: "lazy"
  }) : /*#__PURE__*/_react["default"].createElement("svg", {
    width: "10",
    height: "10",
    viewBox: "0 0 10 10",
    fill: "none",
    xmlns: "http://www.w3.org/2000/svg"
  }, /*#__PURE__*/_react["default"].createElement("path", {
    fillRule: "evenodd",
    clipRule: "evenodd",
    d: "M5.00016 0.833328C2.69898 0.833328 0.833496 2.69881 0.833496 5C0.833496 7.30118 2.69898 9.16666 5.00016 9.16666C7.30135 9.16666 9.16683 7.30118 9.16683 5C9.16683 2.69881 7.30135 0.833328 5.00016 0.833328ZM5.00016 2.49999C4.77004 2.49999 4.5835 2.68654 4.5835 2.91666V5C4.5835 5.10471 4.62212 5.20039 4.6859 5.27359L4.68523 5.27426L4.70125 5.29028L4.70988 5.29891L5.56082 6.14985C5.72354 6.31257 5.98737 6.31257 6.15009 6.14985C6.31281 5.98712 6.31281 5.7233 6.15009 5.56058L5.41683 4.82732V2.91666C5.41683 2.68654 5.23028 2.49999 5.00016 2.49999Z",
    fill: "#16A163"
  }))), time))) // </div>
  , tags.length > 0 && /*#__PURE__*/_react["default"].createElement("div", {
    className: "mb-2",
    "data-automation": dataAutomationTags
  }, tags.map(function (item) {
    return /*#__PURE__*/_react["default"].createElement(_Badge["default"], {
      key: item,
      color: "primary-light",
      fontColor: "primary",
      className: "me-1 tags-ws-explore"
    }, (item === null || item === void 0 ? void 0 : item.length) !== undefined && (item === null || item === void 0 ? void 0 : item.length) > 9 ? (0, _utils.shortTag)(item) : item);
  })), getPricePriority(isHavePrimaryPrice, isHaveDetailPrice, 'detail') && /*#__PURE__*/_react["default"].createElement("div", {
    className: "d-flex flex-column pricing-section mb-3"
  }, /*#__PURE__*/_react["default"].createElement("div", {
    className: "d-flex align-items-center"
  }, /*#__PURE__*/_react["default"].createElement(_Text["default"], {
    className: "original-price text-strikethrough"
  }, originalPrice), discountLabel && /*#__PURE__*/_react["default"].createElement(_Text["default"], {
    className: "discount-label text-xxs"
  }, discountLabel)), /*#__PURE__*/_react["default"].createElement(_Text["default"], {
    color: "secondary",
    className: "text-sm fw-bold"
  }, price), /*#__PURE__*/_react["default"].createElement(_Text["default"], {
    className: "per-volume-price"
  }, volumePrice)), getPricePriority(isHavePrimaryPrice, isHaveDetailPrice, 'primary') && /*#__PURE__*/_react["default"].createElement("div", {
    className: "pricing-section mb-3"
  }, /*#__PURE__*/_react["default"].createElement("h6", {
    className: "label mb-1"
  }, "Mulai dari"), /*#__PURE__*/_react["default"].createElement("h4", {
    className: "price mb-0"
  }, price)), isShowOtopoints && /*#__PURE__*/_react["default"].createElement("div", {
    className: "pricing-section my-2"
  }, /*#__PURE__*/_react["default"].createElement("h6", {
    className: "label xs mb-1"
  }, "Mulai dari"), /*#__PURE__*/_react["default"].createElement("div", {
    className: "d-flex align-items-center"
  }, /*#__PURE__*/_react["default"].createElement("img", {
    src: pointIcon,
    width: 9,
    height: 9,
    alt: "icon-otopoints",
    loading: "lazy"
  }), /*#__PURE__*/_react["default"].createElement("h4", {
    className: "point ms-1 mb-0"
  }, point, /*#__PURE__*/_react["default"].createElement("span", {
    className: "ms-1"
  }, "Otopoints"))))))));
};

CardWorkshopExplore.propTypes = propTypes;
CardWorkshopExplore.defaultProps = defaultProps;
var _default = CardWorkshopExplore;
exports["default"] = _default;
//# sourceMappingURL=CardWorkshopExplore.js.map