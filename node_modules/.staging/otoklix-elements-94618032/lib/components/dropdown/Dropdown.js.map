{"version":3,"sources":["../../../src/components/dropdown/Dropdown.js"],"names":["propTypes","a11y","PropTypes","bool","disabled","direction","oneOf","group","isOpen","nav","active","size","string","tag","tagPropType","toggle","func","children","node","className","cssModule","object","inNavbar","setActiveFromChild","menuRole","defaultProps","preventDefaultKeys","keyCodes","space","enter","up","down","end","home","Dropdown","props","addEvents","bind","handleDocumentClick","handleKeyDown","removeEvents","handleMenuRef","containerRef","React","createRef","menuRef","current","dropup","onMenuRef","handleProps","prevProps","_$menuCtrl","getContainer","querySelector","context","menuContainer","getMenu","slice","call","querySelectorAll","getItemType","forEach","event","document","addEventListener","removeEventListener","e","which","type","tab","container","menu","clickIsInContainer","contains","target","clickIsInInput","classList","tagName","clickIsInMenu","isTargetMenuItem","getAttribute","isTargetMenuCtrl","getMenuCtrl","isTab","test","indexOf","preventDefault","setTimeout","getMenuItems","focus","esc","click","n","p","ctrlKey","$menuitems","index","length","charPressed","String","fromCharCode","toLowerCase","i","firstLetter","textContent","attrs","Tag","subItemIsActive","Children","map","dropdownItem","classes","getContextValue","Component"],"mappings":"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","sourcesContent":["/* eslint react/no-find-dom-node: 0, react/sort-comp: 0, react/prop-types: 0 */\n// https://github.com/yannickcr/eslint-plugin-react/blob/master/docs/rules/no-find-dom-node.md\n\nimport React from 'react';\nimport PropTypes from 'prop-types';\nimport { Manager } from 'react-popper';\nimport classNames from 'classnames';\nimport { DropdownContext } from './DropdownContext';\nimport { mapToCssModules, omit, keyCodes, tagPropType } from '../utils';\n\nconst propTypes = {\n  a11y: PropTypes.bool,\n  disabled: PropTypes.bool,\n  direction: PropTypes.oneOf(['up', 'down', 'start', 'end', 'left', 'right']),\n  group: PropTypes.bool,\n  isOpen: PropTypes.bool,\n  nav: PropTypes.bool,\n  active: PropTypes.bool,\n  size: PropTypes.string,\n  tag: tagPropType,\n  toggle: PropTypes.func,\n  children: PropTypes.node,\n  className: PropTypes.string,\n  cssModule: PropTypes.object,\n  inNavbar: PropTypes.bool,\n  setActiveFromChild: PropTypes.bool,\n  menuRole: PropTypes.oneOf(['listbox', 'menu']),\n};\n\nconst defaultProps = {\n  a11y: true,\n  isOpen: false,\n  direction: 'down',\n  nav: false,\n  active: false,\n  inNavbar: false,\n  setActiveFromChild: false,\n};\n\nconst preventDefaultKeys = [\n  keyCodes.space,\n  keyCodes.enter,\n  keyCodes.up,\n  keyCodes.down,\n  keyCodes.end,\n  keyCodes.home,\n];\n\nclass Dropdown extends React.Component {\n  constructor(props) {\n    super(props);\n\n    this.addEvents = this.addEvents.bind(this);\n    this.handleDocumentClick = this.handleDocumentClick.bind(this);\n    this.handleKeyDown = this.handleKeyDown.bind(this);\n    this.removeEvents = this.removeEvents.bind(this);\n    this.toggle = this.toggle.bind(this);\n    this.handleMenuRef = this.handleMenuRef.bind(this);\n\n    this.containerRef = React.createRef();\n    this.menuRef = React.createRef();\n  }\n\n  handleMenuRef(menuRef) {\n    this.menuRef.current = menuRef;\n  }\n\n  getContextValue() {\n    return {\n      toggle: this.toggle,\n      isOpen: this.props.isOpen,\n      direction:\n        this.props.direction === 'down' && this.props.dropup\n          ? 'up'\n          : this.props.direction,\n      inNavbar: this.props.inNavbar,\n      disabled: this.props.disabled,\n      // Callback that should be called by DropdownMenu to provide a ref to\n      // a HTML tag that's used for the DropdownMenu\n      onMenuRef: this.handleMenuRef,\n      menuRole: this.props.menuRole,\n    };\n  }\n\n  componentDidMount() {\n    this.handleProps();\n  }\n\n  componentDidUpdate(prevProps) {\n    if (this.props.isOpen !== prevProps.isOpen) {\n      this.handleProps();\n    }\n  }\n\n  componentWillUnmount() {\n    this.removeEvents();\n  }\n\n  getContainer() {\n    return this.containerRef.current;\n  }\n\n  getMenu() {\n    return this.menuRef.current;\n  }\n\n  getMenuCtrl() {\n    if (this._$menuCtrl) return this._$menuCtrl;\n    this._$menuCtrl = this.getContainer().querySelector('[aria-expanded]');\n    return this._$menuCtrl;\n  }\n\n  getItemType() {\n    if (this.context.menuRole === 'listbox') {\n      return 'option';\n    }\n    return 'menuitem';\n  }\n\n  getMenuItems() {\n    // In a real menu with a child DropdownMenu, `this.getMenu()` should never\n    // be null, but it is sometimes null in tests. To mitigate that, we just\n    // use `this.getContainer()` as the fallback `menuContainer`.\n    const menuContainer = this.getMenu() || this.getContainer();\n    return [].slice.call(\n      menuContainer.querySelectorAll(`[role=\"${this.getItemType()}\"]`),\n    );\n  }\n\n  addEvents() {\n    ['click', 'touchstart', 'keyup'].forEach((event) =>\n      document.addEventListener(event, this.handleDocumentClick, true),\n    );\n  }\n\n  removeEvents() {\n    ['click', 'touchstart', 'keyup'].forEach((event) =>\n      document.removeEventListener(event, this.handleDocumentClick, true),\n    );\n  }\n\n  handleDocumentClick(e) {\n    if (\n      e &&\n      (e.which === 3 || (e.type === 'keyup' && e.which !== keyCodes.tab))\n    )\n      return;\n    const container = this.getContainer();\n    const menu = this.getMenu();\n    const clickIsInContainer =\n      container.contains(e.target) && container !== e.target;\n    const clickIsInInput =\n      container.classList.contains('input-group') &&\n      container.classList.contains('dropdown') &&\n      e.target.tagName === 'INPUT';\n    const clickIsInMenu = menu && menu.contains(e.target) && menu !== e.target;\n    if (\n      ((clickIsInContainer && !clickIsInInput) || clickIsInMenu) &&\n      (e.type !== 'keyup' || e.which === keyCodes.tab)\n    ) {\n      return;\n    }\n\n    this.toggle(e);\n  }\n\n  handleKeyDown(e) {\n    const isTargetMenuItem =\n      e.target.getAttribute('role') === 'menuitem' ||\n      e.target.getAttribute('role') === 'option';\n    const isTargetMenuCtrl = this.getMenuCtrl() === e.target;\n    const isTab = keyCodes.tab === e.which;\n\n    if (\n      /input|textarea/i.test(e.target.tagName) ||\n      (isTab && !this.props.a11y) ||\n      (isTab && !(isTargetMenuItem || isTargetMenuCtrl))\n    ) {\n      return;\n    }\n\n    if (\n      preventDefaultKeys.indexOf(e.which) !== -1 ||\n      (e.which >= 48 && e.which <= 90)\n    ) {\n      e.preventDefault();\n    }\n\n    if (this.props.disabled) return;\n\n    if (isTargetMenuCtrl) {\n      if (\n        [keyCodes.space, keyCodes.enter, keyCodes.up, keyCodes.down].indexOf(\n          e.which,\n        ) > -1\n      ) {\n        // Open the menu (if not open) and focus the first menu item\n        if (!this.props.isOpen) {\n          this.toggle(e);\n        }\n        setTimeout(() => this.getMenuItems()[0].focus());\n      } else if (this.props.isOpen && isTab) {\n        // Focus the first menu item if tabbing from an open menu. We need this\n        // for cases where the DropdownMenu sets a custom container, which may\n        // not be the natural next item to tab to from the DropdownToggle.\n        e.preventDefault();\n        this.getMenuItems()[0].focus();\n      } else if (this.props.isOpen && e.which === keyCodes.esc) {\n        this.toggle(e);\n      }\n    }\n\n    if (this.props.isOpen && isTargetMenuItem) {\n      if ([keyCodes.tab, keyCodes.esc].indexOf(e.which) > -1) {\n        this.toggle(e);\n        this.getMenuCtrl().focus();\n      } else if ([keyCodes.space, keyCodes.enter].indexOf(e.which) > -1) {\n        e.target.click();\n        this.getMenuCtrl().focus();\n      } else if (\n        [keyCodes.down, keyCodes.up].indexOf(e.which) > -1 ||\n        ([keyCodes.n, keyCodes.p].indexOf(e.which) > -1 && e.ctrlKey)\n      ) {\n        const $menuitems = this.getMenuItems();\n        let index = $menuitems.indexOf(e.target);\n        if (keyCodes.up === e.which || (keyCodes.p === e.which && e.ctrlKey)) {\n          index = index !== 0 ? index - 1 : $menuitems.length - 1;\n        } else if (\n          keyCodes.down === e.which ||\n          (keyCodes.n === e.which && e.ctrlKey)\n        ) {\n          index = index === $menuitems.length - 1 ? 0 : index + 1;\n        }\n        $menuitems[index].focus();\n      } else if (keyCodes.end === e.which) {\n        const $menuitems = this.getMenuItems();\n        $menuitems[$menuitems.length - 1].focus();\n      } else if (keyCodes.home === e.which) {\n        const $menuitems = this.getMenuItems();\n        $menuitems[0].focus();\n      } else if (e.which >= 48 && e.which <= 90) {\n        const $menuitems = this.getMenuItems();\n        const charPressed = String.fromCharCode(e.which).toLowerCase();\n        for (let i = 0; i < $menuitems.length; i += 1) {\n          const firstLetter =\n            $menuitems[i].textContent &&\n            $menuitems[i].textContent[0].toLowerCase();\n          if (firstLetter === charPressed) {\n            $menuitems[i].focus();\n            break;\n          }\n        }\n      }\n    }\n  }\n\n  handleProps() {\n    if (this.props.isOpen) {\n      this.addEvents();\n    } else {\n      this.removeEvents();\n    }\n  }\n\n  toggle(e) {\n    if (this.props.disabled) {\n      return e && e.preventDefault();\n    }\n\n    return this.props.toggle(e);\n  }\n\n  render() {\n    const {\n      className,\n      cssModule,\n      direction,\n      isOpen,\n      group,\n      size,\n      nav,\n      setActiveFromChild,\n      active,\n      tag,\n      menuRole,\n      ...attrs\n    } = omit(this.props, ['toggle', 'disabled', 'inNavbar', 'a11y']);\n\n    const Tag = tag || (nav ? 'li' : 'div');\n\n    let subItemIsActive = false;\n    if (setActiveFromChild) {\n      React.Children.map(\n        this.props.children[1].props.children,\n        (dropdownItem) => {\n          if (dropdownItem && dropdownItem.props.active) subItemIsActive = true;\n        },\n      );\n    }\n\n    const classes = mapToCssModules(\n      classNames(\n        className,\n        nav && active ? 'active' : false,\n        setActiveFromChild && subItemIsActive ? 'active' : false,\n        {\n          'btn-group': group,\n          [`btn-group-${size}`]: !!size,\n          dropdown: !group,\n          dropup: direction === 'up',\n          dropstart: direction === 'start' || direction === 'left',\n          dropend: direction === 'end' || direction === 'right',\n          show: isOpen,\n          'nav-item': nav,\n        },\n      ),\n      cssModule,\n    );\n\n    return (\n      <DropdownContext.Provider value={this.getContextValue()}>\n        <Manager>\n          <Tag\n            {...attrs}\n            {...{\n              [typeof Tag === 'string' ? 'ref' : 'innerRef']: this.containerRef,\n            }}\n            onKeyDown={this.handleKeyDown}\n            className={classes}\n          />\n        </Manager>\n      </DropdownContext.Provider>\n    );\n  }\n}\n\nDropdown.propTypes = propTypes;\nDropdown.defaultProps = defaultProps;\n\nexport default Dropdown;\n"],"file":"Dropdown.js"}